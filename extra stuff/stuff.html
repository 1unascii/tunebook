<script src="/js/abcjs_basic_1.4-min.js">
<script async="" src="/js/global-min.20140421.js">
<script src="/js/yepnope.1.5.4-min.js">

if(!!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect) {
	var beginPreview = function() {
		var preview = function() {
			var scale = 0.8,
				keyselect = document.getElementById('key'),
				keyvalue = keyselect.getElementsByTagName('option')[keyselect.selectedIndex].innerText,
				abcvalue = document.getElementById('abc').value,
				abc = 'M: 4/4\nL: 1/8\nK: '+keyvalue+'\n'+abcvalue;
			if (window.innerWidth<800) {
				scale = scale*(window.innerWidth/780);
			}		
			yepnope({
				test: window.ABCJS,
				nope: '/js/abcjs_basic_1.4-min.js',
				complete: function() {
					window.ABCJS.renderAbc('sheetmusic',abc,{},{'scale':scale});
				}
			});
		};
		preview();
		var previewing = null;
		if (window.addEventListener) {
			document.getElementById('key').addEventListener('change',preview,false);
			document.getElementById('abc').addEventListener('keyup', function() {
				window.clearTimeout(previewing);
				previewing = window.setTimeout(function() {
					preview();
				},1000);
			},false);
		}
	};
	if (window.innerWidth>540) {
		beginPreview();
	} else {
		document.getElementById('sheetmusic').innerHTML='<p><a href="javascript:beginPreview()" class="action button reveal music" role="button">sheet music</a></p>';
	}
}
<input type="submit" formnovalidate="" class="back" value="Previous" name="step1"><input type="submit" value="Next" name="step3">




<h1>Add a tune</h1>

<h2>Step 2 of 4: ABC Notation</h2>


<div class="setting">

<form method="post" action="/tunes/add" class="abc">
	<p>
		<label for="key">
			Key
		</label>
		<select id="key" name="mode_id" required="">
			<option></option>
			<option value="3">Adorian</option>
			<option value="1">Amajor</option>
			<option value="2">Aminor</option>
			<option value="4">Amixolydian</option>
			<option value="23">Bdorian</option>
			<option value="5">Bminor</option>
			<option value="13">Bmixolydian</option>
			<option value="19">Cdorian</option>
			<option value="6">Cmajor</option>
			<option value="18">Ddorian</option>
			<option value="7">Dmajor</option>
			<option value="8">Dminor</option>
			<option value="12">Dmixolydian</option>
			<option value="14">Edorian</option>
			<option value="22">Emajor</option>
			<option value="9">Eminor</option>
			<option value="24">Emixolydian</option>
			<option value="20">Fdorian</option>
			<option value="10">Fmajor</option>
			<option value="16">Gdorian</option>
			<option value="11">Gmajor</option>
			<option value="17">Gminor</option>
			<option value="21">Gmixolydian</option>
		</select>
	</p>
	<p>
		<label for="abc">
			X: 1<br>
			T: Test<br>
			R: reel<br>
			M: 4/4<br>
			L: 1/8<br>
			<small>Please do not add additional ABC headers here: just the body of the tune.</small>
		</label>
		<textarea id="abc" name="abc" rows="10" cols="30" title="the ABC notation without ABC headers" required=""></textarea>
	</p>
	<input name="name" value="Test" type="hidden">
	<input name="type_id" value="2" type="hidden">
	<input name="confirm" value="checked" type="hidden">
	<input name="step1" value="Previous" class="back" formnovalidate="" type="submit">
	<input name="step3" value="Next" type="submit">
</form>
<!-- /.abc -->

<div style="width:252.1076923076923px" id="sheetmusic" class="sheetmusic">

<svg height="75.50769230769231" width="252.1076923076923" version="1.1" xmlns="http://www.w3.org/2000/svg"><text font-size="13px" font-family="serif" fill="#000000" stroke="none" font="10px &quot;Arial&quot;" style="text-anchor: start; font: 13px serif;" text-anchor="start" y="170" x="15.5"></text></svg></div><!-- /.sheetmusic#sheetmusic -->

</div>
<!-- /.setting -->



<div class="actions">
</div><!-- /.actions -->

